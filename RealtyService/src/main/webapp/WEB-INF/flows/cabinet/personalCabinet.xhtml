<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
	template="/WEB-INF/layouts/realty-layout.xhtml">

	<ui:define name="title">#{ui.REALTY_HOME}</ui:define>
	<ui:define name="header">
		<ui:include src="../bricks/navBar.xhtml"></ui:include>
	</ui:define>
	<ui:param name="centerTitle" value="#{resourceBundle.PERSONAL_CABINET}" />

	<ui:define name="content">
		<h:form id="contentForm">
			<p:growl id="growl" sticky="true" showDetail="true" />
			<p:panel>
				<p:tabView id="tabView" effect="drop">

					<p:tab id="tab1" title="#{ui.CONTROL_PANEL}">
						<p:panel id="controlPanel" header="#{ui.CONTROL_PANEL}">
							<!-- TODO depends on where service is payed or trial -->
							<h:panelGrid columns="2" cellpadding="10">
								<p:commandButton value="#{ui[preferences.getRunButtonLabel()]}" action="runService" style="width:170px"
									disabled="#{!preferences.user.isPayed()}" update="controlPanel" />
								<h:outputText value="#{ui[preferences.getServiceStatus()]}" />

								<!-- <p:commandButton value="#{ui.PAY_FOR_SERVICE}" action="payForService" style="width:170px" rendered="#{!preferences.user.isPayed()}"
									update="controlPanel" /> -->
								<ui:include src="bricks/paymoney.xhtml" />
								<h:outputText value="#{ui[preferences.getPayedStatus()]}" rendered="#{!preferences.user.isPayed()}" />
							</h:panelGrid>
						</p:panel>
					</p:tab>

					<p:tab id="tab2" title="#{ui.SEARCH_OPTIONS}">
						<ui:include src="../bricks/criteriaList.xhtml">
							<ui:param name="preferences" value="#{currentState.preferences}" />
						</ui:include>
					</p:tab>

					<p:tab id="tab3" title="#{ui.CREDENTIALS}">
						<h:panelGrid columns="2" cellpadding="10">
							<ui:include src="bricks/userData.xhtml">
								<ui:param name="preferences" value="#{currentState.preferences}"></ui:param>
							</ui:include>
						</h:panelGrid>
					</p:tab>

				</p:tabView>
			</p:panel>
			<p:commandButton value="#{ui.SAVE}" update="growl" action="saveUser" actionListener="#{currentState.preferences.save}" />
		</h:form>
	</ui:define>
</ui:composition>

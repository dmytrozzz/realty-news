<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<p:menuButton value="#{ui.PAY_FOR_SERVICE}"
		rendered="#{!preferences.user.isPayed()}">
		<p:menuitem value="#{ui.BY_CARD}"
			onclick='post("https://liqpay.com/", {"do":"clickNbuy","button":"i1032136775"})' />
		<p:menuitem value="#{ui.BY_EASYPAY}"
			onclick='post("https://merchant.easypay.ua/client/order", {"merchant_id":"2701a2c2cdfe483ea8ce354dd31991db","amount":5,"desc":"Оплата послуги","order_id":0})' />
		<p:menuitem value="#{ui.BY_TERMINAL}"
			onclick='post("http://sprypay.ru/sppi/",{"spShopId":212966,"spShopPaymentId":123,"spCurrency":"uah","spPurpose":"Subscribing","spAmount":"50.00","spUserDataUserId":1234567,"spPurpose":"Subscribing","spPurpose":"Subscribing","spPurpose":"Subscribing"})' />
	</p:menuButton>

	<h:outputText value="#{ui[preferences.getPayedStatus()]}"
		rendered="#{!preferences.user.isPayed()}" />

	<script>
		function post(to, p) {
			var myForm = document.createElement("form");
			myForm.method = "post";
			myForm.action = to;
			for ( var k in p) {
				var myInput = document.createElement("input");
				myInput.setAttribute("name", k);
				myInput.setAttribute("value", p[k]);
				myForm.appendChild(myInput);
			}
			document.body.appendChild(myForm);
			myForm.submit();
			document.body.removeChild(myForm);
		}
	</script>
</ui:composition>
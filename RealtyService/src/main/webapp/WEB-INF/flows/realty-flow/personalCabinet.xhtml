<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
	template="/WEB-INF/layouts/realty-layout.xhtml">

	<ui:define name="title">Realty Home</ui:define>
	<ui:param name="centerTitle" value="Personal Cabinet" />

	<ui:define name="content">
		<h:form id="contentForm">
			<p:growl id="growl" sticky="true" showDetail="true" />
			<p:panel>
				<p:tabView id="tabView" effect="drop">

					<p:tab id="tab1" title="Control Panel">
						<!-- TODO depends on where service is payed or trial -->
						<h:panelGrid columns="2" cellpadding="10">
							<p:commandButton value="Run Service" action="runService" />
							<p:commandButton value="Pay For Service" action="payForService" />
							<p:commandButton value="Stop Service" action="stopService" />
						</h:panelGrid>
					</p:tab>

					<p:tab id="tab2" title="Realty search preferences">
						<ui:include src="components/criteriaList.xhtml">
							<ui:param name="preferences" value="#{currentState.preferences}" />
						</ui:include>
					</p:tab>

					<p:tab id="tab3" title="Personal preferences">
						<h:panelGrid columns="2" cellpadding="10">
							<ui:include src="components/userData.xhtml">
								<ui:param name="preferences" value="#{currentState.preferences}"></ui:param>
							</ui:include>
						</h:panelGrid>
					</p:tab>

				</p:tabView>
			</p:panel>
			<p:commandButton value="Submit" update="growl" action="saveUser" actionListener="#{currentState.preferences.save}" />
		</h:form>
	</ui:define>
</ui:composition>
